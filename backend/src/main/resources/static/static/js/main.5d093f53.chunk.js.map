{"version":3,"sources":["redux/imageDialog.ts","redux/user.ts","redux/store.ts","components/AppHeader.tsx","api.ts","components/LoginCard.tsx","components/NewEntryDialog.tsx","components/ImageExplorer.tsx","images/icon-folder.png","images/icon-file.png","routes/MainPage.tsx","routes/AdminPage.tsx","components/ImageViewDialog.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["ACTION_SHOW","ACTION_HIDE","initialDialogState","visible","entry","undefined","ACTION_LOGIN","ACTION_LOGOUT","initialUserState","name","token","admin","reducers","combineReducers","user","state","action","type","data","imageDialog","store","createStore","ActionsContainer","styled","div","LogoutButton","MarginButton","LogoText","Typography","LoginWrapper","AppHeader","props","history","push","this","logout","AppBar","position","Toolbar","variant","style","flexGrow","onClick","isLoggedIn","isAdmin","Button","handleAdminMenu","bind","username","handleLogout","React","Component","connect","dispatch","errorHandler","err","ok","headerHandler","res","headers","successHandler","status","dataHandler","createHeaders","token2","getState","authorization","apiGet","url","axios","get","process","apiPost","postData","post","apiGetImageAddress","id","TableWrapper","Row","Error","RegText","CenterLoading","LoginCard","loginMode","errorText","loading","inputUsername","inputPassword","setState","password","then","catch","loginResult","userInfo","onLogin","registerResult","CircularProgress","Fragment","padding","color","handleAction","toggleMode","Paper","elevation","width","textAlign","TextField","fullWidth","label","value","onChange","e","target","marginTop","display","justifyContent","flexFlow","renderActions","onUserLogin","SwitchRow","NewEntryDialog","inputFileRef","open","entryName","isDirectory","parentID","currentID","parentId","result","onDone","reader","FileReader","onload","fullFilename","formData","FormData","append","Blob","encodeURIComponent","apiAdminCreateFile","files","readAsArrayBuffer","length","fName","indx","lastIndexOf","substr","Dialog","onClose","handleClose","maxWidth","DialogTitle","DialogContent","Switch","checked","autoFocus","margin","ref","r","handleFileChange","DialogActions","handleDone","disabled","ExplorerPage","BreadcrumpContainer","ContentContainer","EntryWrapper","EntryImage","img","EntryNameWrapper","HistoryLink","BottomRightPlace","ImageExplorer","newEntryRef","entries","hoverEntry","fetchContent","directory","showImageDialog","fromID","params","apiGetContent","sortFunction","a","b","filter","x","sort","index","indexOf","splice","pop","doOpen","Fab","handleFab","IconButton","handleOneUp","Breadcrumbs","aria-label","handleRootClick","map","historyItem","handleHistoryClick","handleEntryClick","onMouseEnter","onMouseLeave","src","opacity","cursor","entryId","preventDefault","stopPropagation","PageWrapper","PageWrapperInPlaceScroll","MainPage","PageColumn","CheckboxContainer","CheckboxRow","SaveButtonRow","AdminPage","extensions","users","changed","error","refreshData","ext","allowedExtensions","includes","usersArray","changedArray","Accordion","AccordionSummary","AccordionDetails","FormControlLabel","control","Checkbox","handleExtensionChange","toUpperCase","handleSave","renderList","Snackbar","autoHideDuration","closeError","severity","ImageViewDialog","close","createBrowserHistory","NoMatch","to","App","exact","path","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5d093f53.chunk.js","sourcesContent":["import { Entry } from \"../api\";\r\n\r\nconst ACTION_SHOW = \"ACTION_SHOW\";\r\nconst ACTION_HIDE = \"ACTION_HIDE\";\r\n\r\nexport const showImageDialog = (entry: Entry) => ({\r\n    type: ACTION_SHOW,\r\n    data: {\r\n        entry: entry\r\n    }\r\n});\r\n\r\nexport const hideImageDialog = () => ({\r\n    type: ACTION_HIDE,\r\n});\r\n\r\nconst initialDialogState = {\r\n    visible: false,\r\n    entry: undefined\r\n};\r\n\r\nexport const dialogReducer = (state = initialDialogState, action: any) => {\r\n    switch (action.type) {\r\n        case ACTION_SHOW:\r\n            return {\r\n                visible: true,\r\n                entry: action.data.entry\r\n            };\r\n        case ACTION_HIDE:\r\n            return {\r\n                visible: false,\r\n                entry: undefined\r\n            };\r\n        default:\r\n            return state\r\n    }\r\n};","const ACTION_LOGIN = \"ACTION_LOGIN\";\r\nconst ACTION_LOGOUT = \"ACTION_LOGOUT\";\r\n\r\nexport const onUserLogin = (name: string, token: string, admin: boolean) => ({\r\n    type: ACTION_LOGIN,\r\n    data: {\r\n        name: name,\r\n        token: token,\r\n        admin: admin\r\n    }\r\n});\r\n\r\nexport const onUserLogout = () => ({\r\n    type: ACTION_LOGOUT,\r\n});\r\n\r\nconst initialUserState = {\r\n    name: null,\r\n    token: null,\r\n    admin: false\r\n};\r\n\r\nexport const userReducer = (state = initialUserState, action: any) => {\r\n    switch (action.type) {\r\n        case ACTION_LOGIN:\r\n            return {\r\n                name: action.data.name,\r\n                token: action.data.token,\r\n                admin: action.data.admin\r\n            };\r\n        case ACTION_LOGOUT:\r\n            return {\r\n                name: null,\r\n                token: null,\r\n                admin: false\r\n            };\r\n        default:\r\n            return state\r\n    }\r\n};","import { combineReducers, createStore } from \"redux\";\r\nimport { dialogReducer } from \"./imageDialog\";\r\nimport { userReducer } from \"./user\";\r\n\r\nconst reducers = combineReducers({\r\n    user: userReducer,\r\n    imageDialog: dialogReducer\r\n});\r\n\r\nexport const store = createStore(reducers);","import React from 'react';\r\n\r\nimport styled from \"styled-components\";\r\nimport { connect } from \"react-redux\";\r\nimport { onUserLogout } from '../redux/user';\r\n\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport LogOutIcon from '@material-ui/icons/SubdirectoryArrowRight';\r\n\r\nimport { history } from '../App';\r\n\r\nconst mapStateToProps = (store: any) => {\r\n    return {\r\n        isLoggedIn: store.user.token !== null,\r\n        username: store.user.name,\r\n        isAdmin: store.user.admin\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => {\r\n    return {\r\n        logout: () => {\r\n            dispatch(onUserLogout());\r\n        }\r\n    };\r\n};\r\n\r\nconst ActionsContainer = styled.div`{\r\n    display: flex;\r\n    align-items: center;\r\n}`;\r\n\r\nconst LogoutButton = styled.div`{\r\n    cursor: pointer;\r\n    margin-left: 0.5rem;\r\n}`;\r\n\r\nconst MarginButton = styled.div`{\r\n    margin-right: 1rem;\r\n}`;\r\n\r\nconst LogoText = styled(Typography)`{\r\n    cursor: pointer;\r\n}`;\r\n\r\nconst LoginWrapper = styled.div`{\r\n    flex: 0 0 auto;\r\n}`;\r\n\r\ntype ActualProps = ReturnType<typeof mapStateToProps> & ReturnType<typeof mapDispatchToProps>;\r\nclass AppHeader extends React.Component<ActualProps> {\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n\r\n    handleAdminMenu() {\r\n        history.push(\"/admin\");\r\n    }\r\n\r\n    handleLogout() {\r\n        this.props.logout();\r\n        history.push(\"/\");\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <LoginWrapper>\r\n                <AppBar position=\"static\">\r\n                    <Toolbar>\r\n                        <LogoText variant=\"h6\" style={{ flexGrow: 1 }} onClick={() => {\r\n                            history.push(\"/\");\r\n                        }}>Image App</LogoText>\r\n                        {\r\n                            this.props.isLoggedIn ? (\r\n                                <ActionsContainer>\r\n                                    {\r\n                                        this.props.isAdmin ? <MarginButton><Button variant=\"contained\" onClick={this.handleAdminMenu.bind(this)}>Admin</Button></MarginButton> : null\r\n                                    }\r\n                                    <Typography variant=\"h6\">{this.props.username}</Typography>\r\n                                    <LogoutButton onClick={this.handleLogout.bind(this)}>\r\n                                        <LogOutIcon />\r\n                                    </LogoutButton>\r\n                                </ActionsContainer>\r\n                            ) : null\r\n                        }\r\n                    </Toolbar>\r\n                </AppBar>\r\n            </LoginWrapper>\r\n        );\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AppHeader);","import axios from 'axios';\r\nimport { store } from './redux/store';\r\n\r\nconst errorHandler = (err: any) => {\r\n    return {\r\n        ok: false\r\n    };\r\n}\r\n\r\nconst headerHandler = (res: any) => {\r\n    return {\r\n        ok: true,\r\n        headers: res.headers\r\n    };\r\n}\r\n\r\nconst successHandler = (res: any) => {\r\n    return {\r\n        ok: (res.status == 200)\r\n    };\r\n};\r\n\r\nconst dataHandler = (res: any) => {\r\n    return {\r\n        ok: true,\r\n        data: res.data\r\n    };\r\n}\r\n\r\nexport interface AuthUser {\r\n    username: string;\r\n    password: string;\r\n}\r\n\r\nexport interface UserSettings {\r\n    id: string;\r\n    name: string;\r\n    allowedExtensions: string[];\r\n}\r\n\r\nexport interface Entry {\r\n    id: string;\r\n    name: string;\r\n    extension: string;\r\n    directory: boolean;\r\n}\r\n\r\nconst createHeaders = (token2?: string) => {\r\n    const token = store.getState().user.token;\r\n    if (token === null) {\r\n        if (token2 !== null) {\r\n            return {\r\n                headers: {\r\n                    authorization: token2\r\n                }\r\n            };\r\n        }\r\n\r\n        return {\r\n            headers: { }\r\n        };\r\n    }\r\n\r\n    return {\r\n        headers: {\r\n            authorization: token\r\n        }\r\n    };\r\n};\r\n\r\nconst apiGet = (url: string, token?: string): any => {\r\n    return axios.get(process.env.REACT_APP_BACKEND + url, createHeaders(token));\r\n}\r\n\r\nconst apiPost = (url: string, postData: any): any => {\r\n    return axios.post(process.env.REACT_APP_BACKEND + url, postData, createHeaders());\r\n}\r\n\r\nexport const apiLogin = (user: AuthUser): Promise<any> => {\r\n    return apiPost(\"/login\", user).then(headerHandler).catch(errorHandler);\r\n};\r\n\r\nexport const apiRegister = (user: AuthUser): Promise<any> => {\r\n    return apiPost(\"/register\", user).then(successHandler).catch(errorHandler);\r\n};\r\n\r\nexport const apiGetUserInfo = (token?: string): Promise<any> => {\r\n    return apiGet('/userInfo', token).then(dataHandler).catch(errorHandler);\r\n};\r\n\r\nexport const apiAdminGetUsers = (): Promise<any> => {\r\n    return apiGet('/admin/allUsers').then(dataHandler).catch(errorHandler);\r\n};\r\n\r\nexport const apiAdminGetExtensions = (): Promise<any> => {\r\n    return apiGet('/admin/allExtensions').then(dataHandler).catch(errorHandler);\r\n};\r\n\r\nexport const apiAdminSaveExtensions = (user: UserSettings): Promise<any> => {\r\n    return apiPost('/admin/userModifyExt', user).then(successHandler).catch(errorHandler);\r\n};\r\n\r\nexport const apiGetContent = (fromID: string): Promise<any> => {\r\n    const params = (fromID == null ? \"\" : `?pid=${encodeURIComponent(fromID)}`);\r\n\r\n    return apiGet(`/content/byParentId${params}`).then(dataHandler).catch(errorHandler);\r\n};\r\n\r\nexport const apiGetImageAddress = (entry: Entry): string => {\r\n    const token = store.getState().user.token;\r\n\r\n    return `${process.env.REACT_APP_BACKEND}/content/data?id=${entry.id}&t=${token}`;\r\n};\r\n\r\nexport const apiAdminCreateDirectory = (parentId: string, name: string): Promise<any> => {\r\n    return apiPost('/admin/createDirectory', { parentId: parentId, name: name }).then(successHandler).catch(errorHandler);\r\n};\r\n\r\nexport const apiAdminCreateFile = (parentId: string, name: string, fullFilename: string, data: ArrayBuffer): Promise<any> => {\r\n    const formData = new FormData();\r\n    formData.append(\"file\", new Blob([data]), fullFilename);\r\n\r\n    return apiPost(`/admin/createFile?parentId=${encodeURIComponent(parentId)}&name=${encodeURIComponent(name)}`, formData).then(successHandler).catch(errorHandler);\r\n};\r\n\r\nexport const apiAdminDeleteEntry = (entryId: string): Promise<any> => {\r\n    return apiGet(`/admin/deleteEntry?entryId=${encodeURIComponent(entryId)}`).then(successHandler).catch(errorHandler);\r\n};","import React from 'react';\r\n\r\nimport styled from \"styled-components\";\r\nimport { connect } from \"react-redux\";\r\nimport { TextField, Paper, Typography, Button, CircularProgress } from '@material-ui/core';\r\nimport { onUserLogin } from '../redux/user';\r\nimport { apiLogin, apiGetUserInfo, apiRegister } from '../api';\r\n\r\nconst TableWrapper = styled.div`{\r\n    display: flex;\r\n    width: 100%;\r\n    flex-flow: column;\r\n}`;\r\n\r\nconst Row = styled.div`{\r\n    display: flex;\r\n    flex-flow: row;\r\n    margin-top: 0.5rem;\r\n    padding-left: 0.5rem;\r\n    padding-right: 0.5rem;\r\n}`;\r\n\r\nconst Error = styled.div`{\r\n    width: 100%;\r\n    text-align: center;\r\n    color: red;\r\n}`;\r\n\r\nconst RegText = styled(Typography)`{\r\n    cursor: pointer;\r\n    color: black;\r\n    text-align: center;\r\n    padding-top: 1rem;\r\n}`;\r\n\r\nconst CenterLoading = styled.div`{\r\n    display: flex;\r\n    justify-content: center;\r\n}`;\r\n\r\ninterface Props {\r\n}\r\n\r\ninterface State {\r\n    loginMode: boolean;\r\n    errorText: string;\r\n    loading: boolean;\r\n\r\n    inputUsername: string;\r\n    inputPassword: string;\r\n}\r\n\r\nconst mapStateToProps = (store: any) => {\r\n    return { };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => {\r\n    return {\r\n        onLogin: (name: string, token: string, admin: boolean) => {\r\n            dispatch(onUserLogin(name, token, admin));\r\n        }\r\n    };\r\n};\r\n\r\ntype ActualProps = ReturnType<typeof mapStateToProps> & ReturnType<typeof mapDispatchToProps> & Props;\r\nclass LoginCard extends React.Component<ActualProps, State> {\r\n    constructor(props: any) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            loginMode: true,\r\n            errorText: \"\",\r\n            loading: false,\r\n            inputUsername: \"\",\r\n            inputPassword: \"\"\r\n        };\r\n    }\r\n\r\n    toggleMode() {\r\n        this.setState({\r\n            loginMode: !this.state.loginMode\r\n        });\r\n    }\r\n\r\n    handleAction() {\r\n        if (this.state.loginMode) {\r\n            this.setState({\r\n                errorText: \"\",\r\n                loading: true\r\n            }, () => {\r\n                apiLogin({\r\n                    username: this.state.inputUsername,\r\n                    password: this.state.inputPassword\r\n                }).then(((loginResult: any) => {\r\n                    if (!loginResult.ok || loginResult.headers.authorization === undefined) {\r\n                        this.setState({\r\n                            loading: false,\r\n                            errorText: \"Hibás adatok!\"\r\n                        });\r\n    \r\n                        return;\r\n                    }\r\n    \r\n                    apiGetUserInfo(loginResult.headers.authorization).then(((userInfo: any) => {\r\n                        if (!userInfo.ok) {\r\n                            this.setState({\r\n                                loading: false,\r\n                                errorText: \"Hibás adatok!\"\r\n                            });\r\n        \r\n                            return;\r\n                        }\r\n    \r\n                        this.setState({\r\n                            loading: false,\r\n                            errorText: \"\"\r\n                        }, () => {\r\n                            this.props.onLogin(userInfo.data.name, loginResult.headers.authorization, userInfo.data.admin);\r\n                        });\r\n                    }).bind(this));\r\n                }).bind(this));\r\n            });\r\n        } else {\r\n            this.setState({\r\n                errorText: \"\",\r\n                loading: true\r\n            }, () => {\r\n                apiRegister({\r\n                    username: this.state.inputUsername,\r\n                    password: this.state.inputPassword\r\n                }).then(((registerResult: any) => {\r\n                    if (registerResult.ok === null || !registerResult.ok) {\r\n                        this.setState({\r\n                            errorText: \"Ilyen felhasználó már létezik!\",\r\n                            loading: false\r\n                        });\r\n                    } else {\r\n                        this.setState({\r\n                            errorText: \"\",\r\n                            loading: false,\r\n                            loginMode: true\r\n                        });\r\n                    }\r\n                }).bind(this));\r\n            });\r\n        }\r\n    }\r\n\r\n    renderActions() {\r\n        if (this.state.loading) {\r\n            return <CenterLoading><CircularProgress /></CenterLoading>;\r\n        }\r\n\r\n        return <React.Fragment>\r\n            <Button style={{ padding: \"10px\" }} variant=\"contained\" color=\"primary\" onClick={this.handleAction.bind(this)}>{this.state.loginMode ? \"Bejelentkezés\" : \"Regisztráció\"}</Button>\r\n            <RegText variant=\"body2\" onClick={this.toggleMode.bind(this)}>\r\n                <u>{this.state.loginMode ? \"Nincs felhasználóm\" : \"Már van felhasználóm\"}</u>\r\n            </RegText>\r\n        </React.Fragment>;\r\n    }\r\n\r\n    render() {\r\n        return <Paper elevation={3} style={{ width: \"400px\", padding: \"20px\" }}>\r\n            <Typography variant=\"h5\" style={{ textAlign: \"center\" }}>{this.state.loginMode ? \"Bejelentkezés\" : \"Regisztráció\"}</Typography>\r\n            <TableWrapper>\r\n                <Row>\r\n                    <TextField id=\"username\" fullWidth label=\"Felhasználónév\" value={this.state.inputUsername} onChange={(e) => this.setState({ inputUsername: e.target.value })} />\r\n                </Row>\r\n                <Row>\r\n                    <TextField id=\"password\" type=\"password\" fullWidth label=\"Jelszó\" value={this.state.inputPassword} onChange={(e) => this.setState({ inputPassword: e.target.value })} />\r\n                </Row>\r\n                <Row style={{ marginTop: \"20px\" }}>\r\n                    <Error><Typography>{this.state.errorText}</Typography></Error>\r\n                </Row>\r\n                <Row style={{ marginTop: \"20px\", display: \"flex\", justifyContent: \"center\", flexFlow: \"column\" }}>\r\n                    {this.renderActions()}\r\n                </Row>\r\n            </TableWrapper>\r\n        </Paper>\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginCard);","import React from 'react';\r\nimport { TextField, Button, Dialog, DialogTitle, DialogContent, Select, DialogActions, Switch, Typography, MenuItem } from '@material-ui/core';\r\nimport styled from \"styled-components\";\r\nimport { apiAdminCreateDirectory, apiAdminCreateFile } from '../api';\r\n\r\ninterface DialogProps {\r\n    onDone: Function;\r\n}\r\n\r\ninterface DialogState {\r\n    open: boolean;\r\n    entryName: string;\r\n    isDirectory: boolean;\r\n    parentID: string;\r\n}\r\n\r\nconst SwitchRow = styled.div`{\r\n    display: flex;\r\n    width: 100%;\r\n    justify-content: center;\r\n    align-items: center;\r\n}`;\r\n\r\nexport default class NewEntryDialog extends React.Component<DialogProps, DialogState> {\r\n    inputFileRef: any;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            open: false,\r\n            entryName: \"\",\r\n            isDirectory: false,\r\n            parentID: \"\"\r\n        };\r\n    }\r\n\r\n    doOpen(currentID: string) {\r\n        this.setState({\r\n            open: true,\r\n            entryName: \"\",\r\n            parentID: currentID\r\n        });\r\n    }\r\n\r\n    handleClose() {\r\n        this.setState({\r\n            open: false\r\n        });\r\n    }\r\n\r\n    handleDone() {\r\n        if (this.state.isDirectory) {\r\n            apiAdminCreateDirectory(this.state.parentID, this.state.entryName).then(result => {\r\n                if (result.ok) {\r\n                    this.setState({\r\n                        open: false\r\n                    }, () => {\r\n                        this.props.onDone();\r\n                    });\r\n                }\r\n            });\r\n        } else {\r\n            const reader = new FileReader();\r\n            reader.onload = (e) => {\r\n                apiAdminCreateFile(this.state.parentID, this.state.entryName, this.inputFileRef.files[0].name, (e as any).target.result).then(result => {\r\n                    if (result.ok) {\r\n                        this.setState({\r\n                            open: false\r\n                        }, () => {\r\n                            this.props.onDone();\r\n                        });\r\n                    }\r\n                });\r\n            };\r\n            reader.readAsArrayBuffer(this.inputFileRef.files[0]);\r\n        }\r\n    }\r\n\r\n    handleFileChange() {\r\n        if (this.inputFileRef.files.length > 0 && this.state.entryName.length == 0) {\r\n            let fName = this.inputFileRef.files[0].name;\r\n            const indx = fName.lastIndexOf(\".\");\r\n            if (indx > 0) {\r\n                fName = fName.substr(0,indx);\r\n            }\r\n            this.setState({\r\n                entryName: fName\r\n            });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return <Dialog onClose={this.handleClose.bind(this)} open={this.state.open} maxWidth={\"md\"}>\r\n            <DialogTitle>Új {this.state.isDirectory ? \"mappa\" : \"file\"}</DialogTitle>\r\n            <DialogContent>\r\n                <SwitchRow>\r\n                    <Typography>Fájl</Typography>\r\n                    <Switch color=\"primary\" checked={this.state.isDirectory} onChange={(e) => this.setState({ isDirectory: e.target.checked })} />\r\n                    <Typography>Mappa</Typography>\r\n                </SwitchRow>\r\n                <TextField autoFocus margin=\"dense\" id=\"ename\" type=\"text\" fullWidth label=\"Név\" value={this.state.entryName} onChange={(e) => this.setState({ entryName: e.target.value })} />\r\n                {\r\n                    this.state.isDirectory ? null :\r\n                    (\r\n                        <>\r\n                            <input ref={(r) => this.inputFileRef = r} type=\"file\" name=\"imageFile\" id=\"imageFile\" onChange={this.handleFileChange.bind(this)}></input>\r\n                        </>\r\n                    )\r\n                }\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={this.handleClose.bind(this)} color=\"primary\">Mégse</Button>\r\n                <Button onClick={this.handleDone.bind(this)} color=\"primary\" disabled={this.state.entryName.length == 0}>Létrehozás</Button>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n}","import React from 'react';\r\n\r\nimport styled from \"styled-components\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport imageFolder from '../images/icon-folder.png';\r\nimport imageFile from '../images/icon-file.png';\r\nimport { apiAdminDeleteEntry, apiGetContent, Entry } from '../api';\r\nimport { Typography, Breadcrumbs, IconButton, Fab } from '@material-ui/core';\r\nimport { showImageDialog } from '../redux/imageDialog';\r\nimport BackIcon from '@material-ui/icons/KeyboardArrowLeft';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport NewEntryDialog from './NewEntryDialog';\r\n\r\nconst mapStateToProps = (store: any) => {\r\n    return {\r\n        isLoggedIn: store.user.token !== null,\r\n        isAdmin: store.user.admin\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => {\r\n    return {\r\n        showImageDialog: (entry: Entry) => {\r\n            dispatch(showImageDialog(entry));\r\n        }\r\n    };\r\n};\r\n\r\ninterface State {\r\n    currentID: string;\r\n    entries: Entry[];\r\n    history: Entry[];\r\n\r\n    hoverEntry: number;\r\n}\r\n\r\nconst ExplorerPage = styled.div`{\r\n    width: 100%;\r\n    height: 100%;\r\n    display: flex;\r\n    flex-flow: column;\r\n}`;\r\n\r\nconst BreadcrumpContainer = styled.div`{\r\n    flex: 0 0 auto;\r\n    padding: 0.5rem;\r\n    display: flex;\r\n    align-items: center;\r\n}`;\r\n\r\nconst ContentContainer = styled.div`{\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n}`;\r\n\r\nconst EntryWrapper = styled.div`{\r\n    width: 256px;\r\n    height: 256px;\r\n    border: 1px solid black;\r\n    display: flex;\r\n    flex-direction: column;\r\n    cursor: pointer;\r\n    position: relative;\r\n}`;\r\n\r\nconst EntryImage = styled.img`{\r\n    flex: 0 0 auto;\r\n}`;\r\n\r\nconst EntryNameWrapper = styled.div`{\r\n    flex: 1 1 auto;\r\n    justify-content: center;\r\n    align-items: center;\r\n    display: flex;\r\n}`;\r\n\r\nconst HistoryLink = styled(Typography)`{\r\n    cursor: pointer;\r\n}`;\r\n\r\nconst BottomRightPlace = styled.div`{\r\n    position: absolute;\r\n    right: 0;\r\n    bottom: 0;\r\n    margin: 1rem;\r\n}`;\r\n\r\ntype ActualProps = ReturnType<typeof mapStateToProps> & ReturnType<typeof mapDispatchToProps>;\r\nclass ImageExplorer extends React.Component<ActualProps, State> {\r\n    newEntryRef: any;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            currentID: \"\",\r\n            entries: [],\r\n            history: [],\r\n            hoverEntry: -1\r\n        };\r\n    }\r\n\r\n    componentWillMount() {\r\n        this.fetchContent();\r\n    }\r\n\r\n    handleEntryClick(entry: Entry) {\r\n        if (entry.directory) {\r\n            const history = this.state.history;\r\n            history.push(entry);\r\n\r\n            this.setState({\r\n                currentID: entry.id,\r\n                history: history\r\n            }, () => {\r\n                this.fetchContent();\r\n            });\r\n        } else {\r\n            this.props.showImageDialog(entry);\r\n        }\r\n    }\r\n\r\n    fetchContent() {\r\n        apiGetContent(this.state.currentID).then(data => {\r\n            if (!data.ok) {\r\n                return;\r\n            }\r\n\r\n            const sortFunction = (a: Entry, b: Entry) => {\r\n                if (a.name < b.name) return -1;\r\n                if (a.name > b.name) return 1;\r\n                return 0;\r\n            };\r\n\r\n            const entries = data.data as Entry[];\r\n            this.setState({\r\n                entries: [...entries.filter(x => x.directory).sort(sortFunction), ...entries.filter(x => !x.directory).sort(sortFunction)],\r\n                hoverEntry: -1\r\n            });\r\n        })\r\n    }\r\n\r\n    handleRootClick() {\r\n        this.setState({\r\n            history: [],\r\n            currentID: \"\"\r\n        }, () => {\r\n            this.fetchContent();\r\n        });\r\n    }\r\n\r\n    handleHistoryClick(entry: Entry) {\r\n        const index = this.state.history.indexOf(entry);\r\n        const history = this.state.history;\r\n        history.splice(index + 1);\r\n\r\n        this.setState({\r\n            history: history,\r\n            currentID: history[history.length - 1].id,\r\n            hoverEntry: -1\r\n        }, () => {\r\n            this.fetchContent();\r\n        });\r\n    }\r\n\r\n    handleOneUp() {\r\n        const history = this.state.history;\r\n        history.pop();\r\n        this.setState({\r\n            history: history,\r\n            currentID: history.length > 0 ? history[history.length - 1].id : \"\",\r\n            hoverEntry: -1\r\n        }, () => {\r\n            this.fetchContent();\r\n        });\r\n    }\r\n\r\n    handleFab() {\r\n        this.newEntryRef.doOpen(this.state.currentID);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <ExplorerPage>\r\n                <NewEntryDialog ref={r => this.newEntryRef = r} onDone={(() => { this.fetchContent(); }).bind(this)} />\r\n                {\r\n                    (this.props.isLoggedIn && this.props.isAdmin) ?\r\n                        (\r\n                            <BottomRightPlace>\r\n                                <Fab color=\"primary\" onClick={this.handleFab.bind(this)}>\r\n                                    <AddIcon />\r\n                                </Fab>\r\n                            </BottomRightPlace>\r\n                        )\r\n                        : null\r\n                }\r\n                <BreadcrumpContainer>\r\n                    <IconButton onClick={this.handleOneUp.bind(this)}>\r\n                        <BackIcon />\r\n                    </IconButton>\r\n                    <Breadcrumbs aria-label=\"breadcrumb\">\r\n                        <HistoryLink color=\"textPrimary\" onClick={this.handleRootClick.bind(this)}>Root</HistoryLink>;\r\n                        {\r\n                            this.state.history.map((historyItem: Entry, index: number) => {\r\n                                return <HistoryLink key={index} color=\"textPrimary\" onClick={(() => { this.handleHistoryClick(historyItem); }).bind(this)}>{historyItem.name}</HistoryLink>;\r\n                            })\r\n                        }\r\n                        <Typography color=\"textPrimary\"></Typography>\r\n                    </Breadcrumbs>\r\n                </BreadcrumpContainer>\r\n                <ContentContainer>\r\n                    {\r\n                        this.state.entries.map((entry, index) => {\r\n                            return <EntryWrapper key={index} onClick={(() => { this.handleEntryClick(entry); }).bind(this)}\r\n                                onMouseEnter={(() => { this.setState({ hoverEntry: index }); }).bind(this)} onMouseLeave={(() => { this.setState({ hoverEntry: -1 }); }).bind(this)}>\r\n                                <EntryImage src={entry.directory ? imageFolder : imageFile} />\r\n                                <EntryNameWrapper>\r\n                                    <Typography>{entry.name}</Typography>\r\n                                </EntryNameWrapper>\r\n                                {\r\n                                    (this.props.isLoggedIn && this.props.isAdmin && this.state.hoverEntry == index) ?\r\n                                        (\r\n                                            <BottomRightPlace>\r\n                                                <DeleteIcon style={{ opacity: 0.25, cursor: \"pointer\" }} onClick={((e: any) => {\r\n                                                    e.preventDefault();\r\n                                                    e.stopPropagation();\r\n                                                    apiAdminDeleteEntry(entry.id).then(result => {\r\n                                                        if (result.ok) {\r\n                                                            this.fetchContent();\r\n                                                        }\r\n                                                    })\r\n                                                }).bind(this)} />\r\n                                            </BottomRightPlace>\r\n                                        )\r\n                                        : null\r\n                                }\r\n                            </EntryWrapper>;\r\n                        })\r\n                    }\r\n                </ContentContainer>\r\n            </ExplorerPage>\r\n        );\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ImageExplorer);","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","import { Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport LoginCard from '../components/LoginCard';\r\nimport styled from \"styled-components\";\r\nimport { connect } from \"react-redux\";\r\nimport ImageExplorer from '../components/ImageExplorer';\r\n\r\nconst mapStateToProps = (store: any) => {\r\n    return {\r\n        isLoggedIn: store.user.token !== null\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => {\r\n    return {\r\n    };\r\n};\r\n\r\nconst PageWrapper = styled.div`{\r\n    flex: 1 1 auto;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}`;\r\n\r\nconst PageWrapperInPlaceScroll = styled.div`{\r\n    flex: 1 1 auto;\r\n}`;\r\n\r\ntype ActualProps = ReturnType<typeof mapStateToProps> & ReturnType<typeof mapDispatchToProps>;\r\nclass MainPage extends React.Component<ActualProps> {\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        if (!this.props.isLoggedIn) {\r\n            return <PageWrapper>\r\n                <LoginCard />\r\n            </PageWrapper>\r\n        }\r\n\r\n        return <PageWrapperInPlaceScroll>\r\n            <ImageExplorer />\r\n        </PageWrapperInPlaceScroll>;\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MainPage);","import React from 'react';\r\nimport LoginCard from '../components/LoginCard';\r\nimport styled from \"styled-components\";\r\nimport { connect } from \"react-redux\";\r\nimport { Accordion, AccordionDetails, AccordionSummary, Button, Checkbox, CircularProgress, FormControlLabel, Snackbar, Typography } from '@material-ui/core';\r\nimport MuiAlert from '@material-ui/lab/Alert';\r\nimport { history } from '../App';\r\nimport { apiAdminGetUsers, apiAdminGetExtensions, UserSettings, apiAdminSaveExtensions } from '../api';\r\n\r\nconst mapStateToProps = (store: any) => {\r\n    return {\r\n        isLoggedIn: store.user.token !== null,\r\n        isAdmin: store.user.admin,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => {\r\n    return {\r\n    };\r\n};\r\n\r\ninterface State {\r\n    loading: boolean;\r\n    extensions: string[];\r\n    users: UserSettings[];\r\n    changed: boolean[];\r\n    error: boolean;\r\n}\r\n\r\nconst PageWrapper = styled.div`{\r\n    flex: 1 1 auto;\r\n    display: flex;\r\n    justify-content: center;\r\n    padding: 1rem;\r\n}`;\r\n\r\nconst PageColumn = styled.div`{\r\n    min-width: 750px;\r\n}`;\r\n\r\nconst CenterLoading = styled.div`{\r\n    display: flex;\r\n    justify-content: center;\r\n}`;\r\n\r\nconst CheckboxContainer = styled.div`{\r\n    display: flex;\r\n    width: 100%;\r\n}`;\r\n\r\nconst CheckboxRow = styled.div`{\r\n    flex: 1 1 auto;\r\n}`;\r\n\r\nconst SaveButtonRow = styled.div`{\r\n    flex: 0 1 auto;\r\n}`;\r\n\r\ntype ActualProps = ReturnType<typeof mapStateToProps> & ReturnType<typeof mapDispatchToProps>;\r\nclass AdminPage extends React.Component<ActualProps, State> {\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            loading: false,\r\n            extensions: [],\r\n            users: [],\r\n            changed: [],\r\n            error: false\r\n        };\r\n    }\r\n\r\n    refreshData() {\r\n        this.setState({\r\n            loading: true\r\n        }, () => {\r\n            apiAdminGetExtensions().then(extensions => {\r\n                if (!extensions.ok) {\r\n                    history.push(\"/\");\r\n                    return;\r\n                }\r\n\r\n                apiAdminGetUsers().then(users => {\r\n                    if (!users.ok) {\r\n                        history.push(\"/\");\r\n                        return;\r\n                    }\r\n\r\n                    this.setState({\r\n                        loading: false,\r\n                        extensions: extensions.data as string[],\r\n                        users: users.data as UserSettings[],\r\n                        changed: users.data.map((x: any) => false),\r\n                    });\r\n                });\r\n            });\r\n        })\r\n    }\r\n\r\n    componentWillMount() {\r\n        if (!this.props.isLoggedIn || !this.props.isAdmin) {\r\n            history.push(\"/\");\r\n            return;\r\n        }\r\n\r\n        this.refreshData();\r\n    }\r\n\r\n    handleExtensionChange(index: number, ext: string, checked: boolean) {\r\n        const user = this.state.users[index];\r\n\r\n        if (checked && !user.allowedExtensions.includes(ext)) {\r\n            user.allowedExtensions.push(ext);\r\n        }\r\n        if (!checked && user.allowedExtensions.includes(ext)) {\r\n            const index = user.allowedExtensions.indexOf(ext);\r\n            user.allowedExtensions.splice(index, 1);\r\n        }\r\n\r\n        const usersArray = this.state.users;\r\n        usersArray[index] = user;\r\n\r\n        const changedArray = this.state.changed;\r\n        changedArray[index] = true;\r\n\r\n        this.setState({\r\n            users: usersArray,\r\n            changed: changedArray\r\n        });\r\n    }\r\n\r\n    handleSave(index: number) {\r\n        const changedArray = this.state.changed;\r\n        changedArray[index] = false;\r\n        this.setState({\r\n            changed: changedArray\r\n        }, () => {\r\n            apiAdminSaveExtensions(this.state.users[index]).then(result => {\r\n                if (!result.ok) {\r\n                    changedArray[index] = true;\r\n                    this.setState({\r\n                        error: false,\r\n                        changed: changedArray\r\n                    });\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    closeError() {\r\n        this.setState({\r\n            error: false\r\n        });\r\n    }\r\n\r\n    renderList() {\r\n        return <React.Fragment>\r\n            {\r\n                this.state.users.map((user, index) => {\r\n                    return (<Accordion key={user.name}>\r\n                        <AccordionSummary>\r\n                            <Typography>{user.name}</Typography>\r\n                        </AccordionSummary>\r\n                        <AccordionDetails>\r\n                            <CheckboxContainer>\r\n                                <CheckboxRow>\r\n                                    {\r\n                                        this.state.extensions.map(ext => {\r\n                                            return <FormControlLabel key={user.name + ext} control={\r\n                                                <Checkbox\r\n                                                    checked={user.allowedExtensions.includes(ext)}\r\n                                                    onChange={((e: any) => { this.handleExtensionChange(index, ext, e.target.checked); }).bind(this)} />\r\n                                            } label={ext.toUpperCase()} />;\r\n                                        })\r\n                                    }\r\n                                </CheckboxRow>\r\n                                <SaveButtonRow>\r\n                                    <Button variant=\"contained\" color=\"primary\" disabled={!this.state.changed[index]}\r\n                                        onClick={((e: any) => { this.handleSave(index); }).bind(this)}>Save</Button>\r\n                                </SaveButtonRow>\r\n                            </CheckboxContainer>\r\n                        </AccordionDetails>\r\n                    </Accordion>);\r\n                })\r\n            }\r\n        </React.Fragment>;\r\n    }\r\n\r\n    render() {\r\n        return <PageWrapper>\r\n            <PageColumn>\r\n                <CenterLoading>\r\n                    <Typography variant=\"h5\">Felhasználók kezelése</Typography>\r\n                </CenterLoading>\r\n                {\r\n                    this.state.loading ?\r\n                        <CenterLoading><CircularProgress /></CenterLoading> :\r\n                        this.renderList()\r\n                }\r\n            </PageColumn>\r\n            <Snackbar open={this.state.error} autoHideDuration={3000} onClose={this.closeError.bind(this)}>\r\n                <MuiAlert elevation={6} variant=\"filled\" onClose={this.closeError.bind(this)} severity=\"error\">Hiba a mentés közben!</MuiAlert>\r\n            </Snackbar>\r\n        </PageWrapper>;\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AdminPage);","import React from 'react';\r\n\r\nimport styled from \"styled-components\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { apiGetImageAddress, Entry } from '../api';\r\nimport { Dialog, DialogTitle } from '@material-ui/core';\r\nimport { hideImageDialog } from '../redux/imageDialog';\r\n\r\nconst mapStateToProps = (store: any) => {\r\n    return {\r\n        visible: store.imageDialog.visible,\r\n        entry: store.imageDialog.entry\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => {\r\n    return {\r\n        close: () => {\r\n            dispatch(hideImageDialog());\r\n        }\r\n    };\r\n};\r\n\r\ntype ActualProps = ReturnType<typeof mapStateToProps> & ReturnType<typeof mapDispatchToProps>;\r\nclass ImageViewDialog extends React.Component<ActualProps> {\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n\r\n    handleClose() {\r\n        this.props.close();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n           <Dialog open={this.props.visible} onClose={this.handleClose.bind(this)}>\r\n               {\r\n                   this.props.entry != null ?\r\n                   <>\r\n                        <DialogTitle>{ this.props.entry?.name }</DialogTitle>\r\n                        <img src={apiGetImageAddress(this.props.entry)} />\r\n                   </>\r\n                   : null\r\n               }\r\n           </Dialog>\r\n        );\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ImageViewDialog);","import React from 'react';\n\nimport { Provider } from 'react-redux'\nimport { store } from './redux/store';\nimport { createBrowserHistory } from 'history';\n\nimport { Router, Switch, Redirect, Route } from \"react-router-dom\";\nimport styled from \"styled-components\";\n\nimport AppHeader from './components/AppHeader';\nimport MainPage from './routes/MainPage';\nimport AdminPage from './routes/AdminPage';\nimport ImageViewDialog from './components/ImageViewDialog';\nimport { Entry } from './api';\n\nexport const history = createBrowserHistory();\n\nconst NoMatch = () => <Redirect to=\"/\" />\n\nconst PageWrapper = styled.div`{\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-flow: column;\n}`;\n\nexport default class App extends React.Component {\n    constructor(props: any) {\n        super(props);\n    }\n\n    render() {\n        return <Provider store={store}>\n            <PageWrapper>\n                <Router history={history}>\n                    <AppHeader />\n                    <Switch>\n                        <Route exact path={\"/\"} component={MainPage} />\n                        <Route exact path={\"/admin\"} component={AdminPage} />\n                        <Route exact component={NoMatch} />\n                    </Switch>\n                    <ImageViewDialog />\n                </Router>\n            </PageWrapper>\n        </Provider>;\n    }\n};\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);  \n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n}\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}